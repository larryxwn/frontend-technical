<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <script type="text/javascript" src="myPromise.js" /></script>
        <script type="text/javascript">
            const date = new Date();
            let p1 = new MyPromise((resolve, reject)=> {
                setTimeout(()=> {
                    resolve('success');
                }, 1000);
            })
            let p2 = p1.then((value)=> {
                const past = new Date() - date;
                console.log(past + ': '+value);
                return new MyPromise((resolve, reject)=>{reject('12313')});
            }, (reason)=> {
                const past = new Date() - date;
                console.log(past + ': '+reason);
            });
            
            p2.then((value)=> {
                console.log('p2:success');
            },(reason)=> {
                console.log('p2:rejected');
            });
            p2.catch((reason)=> {
                console.log('p2:rejected');
            });
            console.log('testing Promise.all');
            var p3 = new MyPromise((resolve, reject)=> {
                resolve(3);
            });

            var p4 = new MyPromise((resolve, reject)=> {
                resolve(4);
            });

            var p5 = new MyPromise((resolve, reject)=> {
                setTimeout(()=> {resolve(5)},8000);
            });

            var p6 = new MyPromise((resolve, reject)=> {
                resolve(6)
            });

            var p = MyPromise.all([p3,p4,p5,p6])
            console.log(p);

        </script>
    </body>
</html>
